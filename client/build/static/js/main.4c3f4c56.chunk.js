(this["webpackJsonpiris-lp-scanner"]=this["webpackJsonpiris-lp-scanner"]||[]).push([[0],{18:function(e){e.exports=JSON.parse('{"domain":"irislpscanner.auth0.com","clientId":"M17zu4cqYSOe9LuVKwAVW4QWToWOji5W"}')},28:function(e,t,a){e.exports=a.p+"static/media/recordSpinning.0f067fa5.mp4"},30:function(e,t,a){e.exports=a(46)},46:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),l=a(24),c=a.n(l),o=a(48),s=a(4),u=Object(s.a)(),m=a(5),p=a.n(m),d=a(14),h=a(6),v=a(29),b=a(25),f=a.n(b),g=function(){return window.history.replaceState({},document.title,window.location.pathname)},y=i.a.createContext(),E=function(){return Object(r.useContext)(y)},_=function(e){var t=e.children,a=e.onRedirectCallback,n=void 0===a?g:a,l=Object(v.a)(e,["children","onRedirectCallback"]),c=Object(r.useState)(),o=Object(h.a)(c,2),s=o[0],u=o[1],m=Object(r.useState)(),b=Object(h.a)(m,2),E=b[0],_=b[1],N=Object(r.useState)(),w=Object(h.a)(N,2),k=w[0],O=w[1],I=Object(r.useState)(!0),j=Object(h.a)(I,2),x=j[0],q=j[1],C=Object(r.useState)(!1),S=Object(h.a)(C,2),T=S[0],P=S[1];Object(r.useEffect)((function(){(function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,r,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()(l);case 2:if(t=e.sent,O(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,r=a.appState,n(r);case 10:return e.next=12,t.isAuthenticated();case 12:if(i=e.sent,u(i),!i){e.next=19;break}return e.next=17,t.getUser();case 17:c=e.sent,_(c);case 19:q(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var R=function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,n=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},P(!0),e.prev=2,e.next=5,k.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,P(!1),e.finish(10);case 13:return e.next=15,k.getUser();case 15:a=e.sent,_(a),u(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,k.handleRedirectCallback();case 3:return e.next=5,k.getUser();case 5:t=e.sent,q(!1),u(!0),_(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(y.Provider,{value:{isAuthenticated:s,user:E,loading:x,popupOpen:T,loginWithPopup:R,handleRedirectCallback:V,getIdTokenClaims:function(){return k.getIdTokenClaims.apply(k,arguments)},loginWithRedirect:function(){return k.loginWithRedirect.apply(k,arguments)},getTokenSilently:function(){return k.getTokenSilently.apply(k,arguments)},getTokenWithPopup:function(){return k.getTokenWithPopup.apply(k,arguments)},logout:function(){return k.logout.apply(k,arguments)}}},t)},N=function(){var e=E(),t=e.isAuthenticated,a=e.loginWithRedirect,n=e.logout,r=e.user;return i.a.createElement("div",null,i.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light mb-4"},i.a.createElement("h4",{className:"navbar-brand mt-2"},"IRIS LP Scanner"),i.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("div",{className:"collapse navbar-collapse text-right",id:"navbarCollapse"},i.a.createElement("ul",{className:"navbar-nav nav-items ml-auto mr-3"},i.a.createElement("li",{className:"nav-item"},!t&&i.a.createElement("button",{onClick:function(){return a({})}},"Log in"),t&&i.a.createElement("span",null,r.email,i.a.createElement("button",{className:"ml-3",onClick:function(){return n()}},"Log out")))))))},w=a(8),k=a(9),O=a(2),I=a(13),j=a(12),x=a(10),q=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).state={title:n.props.title,quantity:n.props.quantity,price:n.props.price,quantity_received:0,total_quantity:n.props.quantity,error:n.props.error},n}return Object(k.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"ml-3 mt-3"},this.props.title&&"Item not found"!==this.props.title?i.a.createElement("form",{className:"ml-3 mt-3"},i.a.createElement("div",{className:"form-group row"},i.a.createElement("img",{src:this.props.image_url,alt:this.props.title,height:"200",width:"200"})),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-form-label"},"Title:"),i.a.createElement("input",{className:"ml-2 form-control col-6",type:"text",name:"title",value:this.props.title,onChange:this.props.handleTitleValue})),i.a.createElement("div",{className:"form-group row"},i.a.createElement("label",{className:"col-form-label"},"Barcode:"),i.a.createElement("input",{className:"ml-2 form-control col-2",type:"text",name:"barcode",value:this.props.barcode,disabled:!0})),i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:"input-group"},i.a.createElement("label",{className:"col-form-label"},"Current Quantity:"),i.a.createElement("input",{className:"form-control col-2 ml-2",type:"number",value:this.props.quantity,disabled:!0}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:"input-group"},i.a.createElement("label",{className:"col-form-label"},"Quantity Received:"),i.a.createElement("input",{className:"form-control col-2 ml-2",type:"number",name:"quantity_received",min:"0",value:this.props.quantity_received,onChange:this.props.handleTotalQuantityValue,autoFocus:!0}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:"input-group"},i.a.createElement("label",{className:"col-form-label"},"New Quantity:"),i.a.createElement("input",{className:"form-control col-2 ml-2",type:"number",name:"total_quantity",min:"0",value:this.props.total_quantity,disabled:!0}))),i.a.createElement("div",{className:"form-group row"},i.a.createElement("div",{className:"input-group"},i.a.createElement("label",{className:"col-form-label"},"Price:"),i.a.createElement("div",{className:"ml-2 input-group-prepend"},i.a.createElement("div",{className:"input-group-text"},"$")),i.a.createElement("input",{className:"form-control col-2",type:"number",name:"price",min:"0",value:this.props.price,onChange:this.props.handlePriceValue}))),i.a.createElement("input",{type:"hidden",name:"item_variation_id",value:this.props.item_variation_id}),i.a.createElement("input",{type:"hidden",name:"item_variation_version",value:this.props.item_variation_version}),i.a.createElement("div",{className:"form-group row"},this.props.item_variation_version?i.a.createElement("button",{className:"btn btn-primary mr-2",onClick:this.props.update},"Update "):i.a.createElement("button",{className:"btn btn-primary mr-2",onClick:this.props.create},"Create "),i.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.cancel},"Cancel"))):null,!0===this.props.saved?i.a.createElement("div",{className:"text-center mt-5"},i.a.createElement("h3",null,this.state.title," Item saved to Square.")):null,"Item not found"===this.props.title?i.a.createElement("div",{className:"text-center mt-5"},i.a.createElement("h3",null,"Item not found")):null,!0===this.props.error?i.a.createElement("div",{className:"text-center mt-5"},i.a.createElement("h3",null,"An error occured, please contact the developer.")):null)}}]),a}(i.a.Component);n="https://iris-lp-scanner-server.herokuapp.com";var C=function(e){Object(I.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).state={barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!1,error:!1},n.searchInput=i.a.createRef(),n.handleBarcodeInput=n.handleBarcodeInput.bind(Object(O.a)(n)),n.searchForItem=n.searchForItem.bind(Object(O.a)(n)),n.handleTitleValue=n.handleTitleValue.bind(Object(O.a)(n)),n.handlePriceValue=n.handlePriceValue.bind(Object(O.a)(n)),n.handleTotalQuantityValue=n.handleTotalQuantityValue.bind(Object(O.a)(n)),n.create=n.create.bind(Object(O.a)(n)),n.update=n.update.bind(Object(O.a)(n)),n.cancel=n.cancel.bind(Object(O.a)(n)),n}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.searchInput.current.focus()}},{key:"handleBarcodeInput",value:function(e){this.setState({barcodeInput:e.target.value,barcode:e.target.value})}},{key:"searchForItem",value:function(e){var t=this;e.preventDefault(),this.setState({saved:!1}),Object(x.trackPromise)(fetch("".concat(n,"/search/").concat(this.state.barcodeInput),{mode:"cors"})).then((function(e){return e.json()})).then((function(e){if(e.quantity)var a=e.quantity;else a=t.state.quantity;t.setState({title:e.title,image_url:e.cover_image,quantity:a,price:e.price,barcodeInput:"",item_id:e.item_id,item_variation_id:e.item_variation_id,item_variation_version:e.item_variation_version,item_state:e.item_state})})).catch((function(e){t.setState({error:!0}),console.log("error searching for item\n"),console.log(e)}))}},{key:"handleTitleValue",value:function(e){e.preventDefault(),this.setState({title:e.target.value})}},{key:"handlePriceValue",value:function(e){e.preventDefault(),this.setState({price:e.target.value})}},{key:"handleTotalQuantityValue",value:function(e){e.preventDefault();var t=parseInt(e.target.value)+parseInt(this.state.quantity);this.setState({quantity_received:e.target.value,total_quantity:t})}},{key:"create",value:function(e){var t=this;e.preventDefault(),this.searchInput.current.focus();var a=this.state;fetch("".concat(n,"/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),mode:"cors"}).then((function(e){return e.text()})).catch((function(e){t.setState({error:!0}),console.log("error creating item"),console.log(e)})),this.setState({barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!0})}},{key:"update",value:function(e){var t=this;e.preventDefault(),this.searchInput.current.focus();var a=this.state;fetch("".concat(n,"/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),mode:"cors"}).then((function(e){return e.text()})).catch((function(e){t.setState({error:!0}),console.log("error updating item\n"),console.log(e)})),this.setState({barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!0})}},{key:"cancel",value:function(e){e.preventDefault(),this.setState({barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!1})}},{key:"render",value:function(){return i.a.createElement("div",null,""===this.state.title||"Item not found"===this.state.title?i.a.createElement("form",null,i.a.createElement("div",{className:"ml-3 form-group row"},i.a.createElement("input",{className:"form-control col-3",type:"text",name:"barcode",value:this.state.barcodeInput,onChange:this.handleBarcodeInput,ref:this.searchInput,placeholder:"Scan or enter barcode"}),i.a.createElement("button",{className:"btn btn-primary ml-1",onClick:this.searchForItem},i.a.createElement("svg",{className:"bi bi-search",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M10.442 10.442a1 1 0 011.415 0l3.85 3.85a1 1 0 01-1.414 1.415l-3.85-3.85a1 1 0 010-1.415z",clipRule:"evenodd"}),i.a.createElement("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zM13 6.5a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z",clipRule:"evenodd"}))))):i.a.createElement("form",null,i.a.createElement("div",{className:"ml-3 form-group row"},i.a.createElement("input",{className:"form-control col-3",type:"text",name:"barcode",value:this.state.barcodeInput,onChange:this.handleBarcodeInput,ref:this.searchInput,placeholder:"Scan or enter barcode",disabled:!0}),i.a.createElement("button",{className:"btn btn-primary ml-1",onClick:this.searchForItem},i.a.createElement("svg",{className:"bi bi-search",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{fillRule:"evenodd",d:"M10.442 10.442a1 1 0 011.415 0l3.85 3.85a1 1 0 01-1.414 1.415l-3.85-3.85a1 1 0 010-1.415z",clipRule:"evenodd"}),i.a.createElement("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zM13 6.5a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z",clipRule:"evenodd"}))))),i.a.createElement(q,{title:this.state.title,image_url:this.state.image_url,barcode:this.state.barcode,quantity:this.state.quantity,price:this.state.price,handleTitleValue:this.handleTitleValue,handlePriceValue:this.handlePriceValue,handleTotalQuantityValue:this.handleTotalQuantityValue,quantity_received:this.state.quantity_received,total_quantity:this.state.total_quantity,saved:this.state.saved,error:this.state.error,item_variation_id:this.state.item_variation_id,item_variation_version:this.state.item_variation_version,create:this.create,update:this.update,cancel:this.cancel}))}}]),a}(i.a.Component);var S=function(){var e=E(),t=e.isAuthenticated;return e.loading?i.a.createElement("div",null,"Loading..."):i.a.createElement("div",{className:"App"},i.a.createElement(o.b,{history:u},i.a.createElement(o.a,{path:"/",exact:!0}),i.a.createElement(N,null),!t&&i.a.createElement("div",{className:"text-center mt-5"},i.a.createElement("h5",null,"Please login to begin.")),t&&i.a.createElement("div",null,i.a.createElement(C,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(18),P=a(28),R=a.n(P),V=function(e){var t=Object(x.usePromiseTracker)().promiseInProgress;return i.a.createElement("div",{className:"ml-3"},!0===t?i.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0},i.a.createElement("source",{src:R.a,type:"video/mp4"})):null)};c.a.render(i.a.createElement(_,{domain:T.domain,client_id:T.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){u.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},i.a.createElement(S,null),i.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.4c3f4c56.chunk.js.map