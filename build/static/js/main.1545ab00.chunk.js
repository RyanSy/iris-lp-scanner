(this["webpackJsonpiris-lp-scanner"]=this["webpackJsonpiris-lp-scanner"]||[]).push([[0],{18:function(e){e.exports=JSON.parse('{"domain":"irislpscanner.auth0.com","clientId":"M17zu4cqYSOe9LuVKwAVW4QWToWOji5W"}')},28:function(e,t,a){e.exports=a.p+"static/media/recordSpinning.0f067fa5.mp4"},30:function(e,t,a){e.exports=a(46)},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),l=a.n(i),c=a(48),o=a(4),s=Object(o.a)(),u=a(5),m=a.n(u),p=a(14),d=a(6),h=a(29),v=a(25),b=a.n(v),f=function(){return window.history.replaceState({},document.title,window.location.pathname)},g=r.a.createContext(),y=function(){return Object(n.useContext)(g)},E=function(e){var t=e.children,a=e.onRedirectCallback,i=void 0===a?f:a,l=Object(h.a)(e,["children","onRedirectCallback"]),c=Object(n.useState)(),o=Object(d.a)(c,2),s=o[0],u=o[1],v=Object(n.useState)(),y=Object(d.a)(v,2),E=y[0],_=y[1],N=Object(n.useState)(),O=Object(d.a)(N,2),k=O[0],w=O[1],j=Object(n.useState)(!0),q=Object(d.a)(j,2),I=q[0],x=q[1],C=Object(n.useState)(!1),S=Object(d.a)(C,2),T=S[0],P=S[1];Object(n.useEffect)((function(){(function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()(l);case 2:if(t=e.sent,w(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,i(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,u(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:c=e.sent,_(c);case 19:x(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var V=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},P(!0),e.prev=2,e.next=5,k.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,P(!1),e.finish(10);case 13:return e.next=15,k.getUser();case 15:a=e.sent,_(a),u(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,k.handleRedirectCallback();case 3:return e.next=5,k.getUser();case 5:t=e.sent,x(!1),u(!0),_(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(g.Provider,{value:{isAuthenticated:s,user:E,loading:I,popupOpen:T,loginWithPopup:V,handleRedirectCallback:R,getIdTokenClaims:function(){return k.getIdTokenClaims.apply(k,arguments)},loginWithRedirect:function(){return k.loginWithRedirect.apply(k,arguments)},getTokenSilently:function(){return k.getTokenSilently.apply(k,arguments)},getTokenWithPopup:function(){return k.getTokenWithPopup.apply(k,arguments)},logout:function(){return k.logout.apply(k,arguments)}}},t)},_=function(){var e=y(),t=e.isAuthenticated,a=e.loginWithRedirect,n=e.logout,i=e.user;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light mb-4"},r.a.createElement("h4",{className:"navbar-brand mt-2"},"IRIS LP Scanner"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse text-right",id:"navbarCollapse"},r.a.createElement("ul",{className:"navbar-nav nav-items ml-auto mr-3"},r.a.createElement("li",{className:"nav-item"},!t&&r.a.createElement("button",{onClick:function(){return a({})}},"Log in"),t&&r.a.createElement("span",null,i.email,r.a.createElement("button",{className:"ml-3",onClick:function(){return n()}},"Log out")))))))},N=a(8),O=a(9),k=a(2),w=a(12),j=a(13),q=a(10),I=function(e){Object(j.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).state={title:n.props.title,quantity:n.props.quantity,price:n.props.price,quantity_received:0,total_quantity:n.props.quantity},n}return Object(O.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ml-3 mt-3"},this.props.title&&"Item not found"!==this.props.title?r.a.createElement("form",{className:"ml-3 mt-3"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("img",{src:this.props.image_url,alt:this.props.title,height:"300",width:"300"})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-form-label"},"Title:"),r.a.createElement("input",{className:"ml-2 form-control col-6",type:"text",name:"title",value:this.props.title,onChange:this.props.handleTitleValue})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-form-label"},"Barcode:"),r.a.createElement("input",{className:"ml-2 form-control col-2",type:"text",name:"barcode",value:this.props.barcode,disabled:!0})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"col-form-label"},"Current Quantity:"),r.a.createElement("input",{className:"form-control col-2 ml-2",type:"number",value:this.props.quantity,disabled:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"col-form-label"},"Quantity Received:"),r.a.createElement("input",{className:"form-control col-2 ml-2",type:"number",name:"quantity_received",min:"0",value:this.props.quantity_received,onChange:this.props.handleTotalQuantityValue,autoFocus:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"col-form-label"},"New Quantity:"),r.a.createElement("input",{className:"form-control col-2 ml-2",type:"number",name:"total_quantity",min:"0",value:this.props.total_quantity,disabled:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{className:"col-form-label"},"Price:"),r.a.createElement("div",{className:"ml-2 input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"$")),r.a.createElement("input",{className:"form-control col-2",type:"number",name:"price",min:"0",value:this.props.price,onChange:this.props.handlePriceValue}))),r.a.createElement("div",{className:"form-group row"},this.props.item_variation_version?r.a.createElement("button",{className:"btn btn-primary mr-2",onClick:this.props.update},"Update "):r.a.createElement("button",{className:"btn btn-primary mr-2",onClick:this.props.create},"Create "),r.a.createElement("button",{className:"btn btn-secondary",onClick:this.props.cancel},"Cancel"))):null,!0===this.props.saved?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("h3",null,this.state.title," Item saved to Square.")):null,"Item not found"===this.props.title?r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("h3",null,"Item not found")):null)}}]),a}(r.a.Component),x=function(e){Object(j.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).state={barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!1},n.searchInput=r.a.createRef(),n.handleBarcodeInput=n.handleBarcodeInput.bind(Object(k.a)(n)),n.searchForItem=n.searchForItem.bind(Object(k.a)(n)),n.handleTitleValue=n.handleTitleValue.bind(Object(k.a)(n)),n.handlePriceValue=n.handlePriceValue.bind(Object(k.a)(n)),n.handleTotalQuantityValue=n.handleTotalQuantityValue.bind(Object(k.a)(n)),n.create=n.create.bind(Object(k.a)(n)),n.update=n.update.bind(Object(k.a)(n)),n.cancel=n.cancel.bind(Object(k.a)(n)),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this.searchInput.current.focus()}},{key:"handleBarcodeInput",value:function(e){this.setState({barcodeInput:e.target.value,barcode:e.target.value})}},{key:"searchForItem",value:function(e){var t=this;e.preventDefault(),this.setState({saved:!1}),Object(q.trackPromise)(fetch("https://iris-lp-scanner-server.herokuapp.com/search/".concat(this.state.barcodeInput),{mode:"cors"})).then((function(e){return e.json()})).then((function(e){if(e.quantity)var a=e.quantity;else a=t.state.quantity;t.setState({title:e.title,image_url:e.cover_image,quantity:a,price:e.price,barcodeInput:"",item_id:e.item_id,item_variation_id:e.item_variation_id,item_variation_version:e.item_variation_version,item_state:e.item_state})})).catch((function(e){console.log("error searching for item\n"),console.log(e)}))}},{key:"handleTitleValue",value:function(e){e.preventDefault(),this.setState({title:e.target.value})}},{key:"handlePriceValue",value:function(e){e.preventDefault(),this.setState({price:e.target.value})}},{key:"handleTotalQuantityValue",value:function(e){e.preventDefault();var t=parseInt(e.target.value)+parseInt(this.state.quantity);this.setState({quantity_received:e.target.value,total_quantity:t})}},{key:"create",value:function(e){e.preventDefault(),this.searchInput.current.focus();var t=this.state;fetch("https://iris-lp-scanner-server.herokuapp.com/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),mode:"cors"}).then((function(e){return e.text()})).then((function(e){return e?JSON.parse(e):{}})).catch((function(e){console.log("error creating item"),console.log(e)})),this.setState({barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!0})}},{key:"update",value:function(e){e.preventDefault(),this.searchInput.current.focus();var t=this.state;fetch("https://iris-lp-scanner-server.herokuapp.com/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),mode:"cors"}).then((function(e){return e.text()})).then((function(e){return e?JSON.parse(e):{}})).catch((function(e){console.log("error updating item\n"),console.log(e)})),this.setState({barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!0})}},{key:"cancel",value:function(e){e.preventDefault(),this.setState({barcodeInput:"",barcode:"",title:"",image_url:"",quantity:0,price:"",quantity_received:"",total_quantity:"",item_id:"",item_variation_id:"",item_variation_version:"",item_state:"",saved:!1})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",{className:"ml-3 form-group row"},r.a.createElement("input",{className:"form-control col-3",type:"text",name:"barcode",value:this.state.barcodeInput,onChange:this.handleBarcodeInput,ref:this.searchInput,placeholder:"Scan or enter barcode"}),r.a.createElement("button",{className:"btn btn-primary ml-1",onClick:this.searchForItem},r.a.createElement("svg",{className:"bi bi-search",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M10.442 10.442a1 1 0 011.415 0l3.85 3.85a1 1 0 01-1.414 1.415l-3.85-3.85a1 1 0 010-1.415z",clipRule:"evenodd"}),r.a.createElement("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zM13 6.5a6.5 6.5 0 11-13 0 6.5 6.5 0 0113 0z",clipRule:"evenodd"}))))),r.a.createElement(I,{title:this.state.title,image_url:this.state.image_url,barcode:this.state.barcode,quantity:this.state.quantity,price:this.state.price,handleTitleValue:this.handleTitleValue,handlePriceValue:this.handlePriceValue,handleTotalQuantityValue:this.handleTotalQuantityValue,quantity_received:this.state.quantity_received,total_quantity:this.state.total_quantity,saved:this.state.saved,create:this.create,update:this.update,cancel:this.cancel}))}}]),a}(r.a.Component);var C=function(){var e=y(),t=e.isAuthenticated;return e.loading?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"App"},r.a.createElement(c.b,{history:s},r.a.createElement(c.a,{path:"/",exact:!0}),r.a.createElement(_,null),!t&&r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement("h5",null,"Please login to begin.")),t&&r.a.createElement("div",null,r.a.createElement(x,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=a(18),T=a(28),P=a.n(T),V=function(e){var t=Object(q.usePromiseTracker)().promiseInProgress;return r.a.createElement("div",{className:"ml-3"},!0===t?r.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0},r.a.createElement("source",{src:P.a,type:"video/mp4"})):null)};l.a.render(r.a.createElement(E,{domain:S.domain,client_id:S.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){s.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(C,null),r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.1545ab00.chunk.js.map